{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport AppLayout from '@/components/layout/AppLayout.vue';\nimport axios from 'axios';\nexport default {\n  components: {\n    AppLayout\n  },\n  data() {\n    return {\n      tableData: [],\n      dialogVisible: false,\n      isEdit: false,\n      choreForm: {\n        id: null,\n        choreName: '',\n        points: 0,\n        dueDate: '',\n        choreStatus: 'PENDING'\n      },\n      spaceUsers: []\n    };\n  },\n  methods: {\n    getStatusType(status) {\n      switch (status) {\n        case 'PENDING':\n          return 'warning';\n        case 'IN_PROGRESS':\n          return 'primary';\n        case 'COMPLETED':\n          return 'success';\n        default:\n          return 'info';\n      }\n    },\n    editChore(row) {\n      this.isEdit = true;\n      this.choreForm = {\n        ...row\n      };\n      this.dialogVisible = true;\n    },\n    deleteChore(id) {\n      this.$confirm('Are you sure you want to delete this chore?', 'Warning', {\n        confirmButtonText: 'Delete',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(() => {\n        axios.delete(`http://localhost:8080/chores/${id}`).then(() => {\n          this.$message.success('Chore deleted successfully');\n          this.fetchChores();\n        }).catch(error => {\n          console.error('Error deleting chore:', error);\n          this.$message.error('Failed to delete chore');\n        });\n      });\n    },\n    submitChore() {\n      const url = this.isEdit ? `http://localhost:8080/chores/${this.choreForm.id}` : 'http://localhost:8080/chores';\n      const method = this.isEdit ? 'put' : 'post';\n      axios[method](url, this.choreForm).then(() => {\n        this.$message.success(this.isEdit ? 'Chore updated successfully' : 'Chore created successfully');\n        this.dialogVisible = false;\n        this.resetForm();\n        this.fetchChores();\n      }).catch(error => {\n        console.error('Error saving chore:', error);\n        this.$message.error('Failed to save chore');\n      });\n    },\n    resetForm() {\n      this.isEdit = false;\n      this.choreForm = {\n        id: null,\n        choreName: '',\n        points: 0,\n        dueDate: '',\n        choreStatus: 'PENDING'\n      };\n    },\n    fetchChores() {\n      axios.get('http://localhost:8080/chores').then(response => {\n        if (response.data && response.data.status === 'success') {\n          this.tableData = response.data.data;\n        } else {\n          this.$message.error('Failed to fetch chores: Invalid response format');\n        }\n      }).catch(error => {\n        console.error('Error fetching chores:', error);\n        this.$message.error('Failed to fetch chores');\n      });\n    },\n    fetchSpaceUsers() {\n      const spaceId = localStorage.getItem('spaceId');\n      if (!spaceId) return;\n      axios.get(`http://localhost:8080/space/${spaceId}`).then(response => {\n        if (response.data && response.data.users) {\n          this.spaceUsers = response.data.users;\n        }\n      }).catch(error => {\n        console.error('Error fetching space users:', error);\n        this.$message.error('Failed to fetch space users');\n      });\n    },\n    assignUser(choreId, userId) {\n      axios.put(`http://localhost:8080/chores/${choreId}/assign/${userId}`).then(response => {\n        if (response.data.status === 'success') {\n          const assignedUser = this.spaceUsers.find(user => user.id === userId);\n          const chore = this.tableData.find(c => c.id === choreId);\n          if (chore) {\n            chore.assignedUser = assignedUser;\n            chore.choreStatus = 'IN_PROGRESS';\n          }\n          this.$message.success('User assigned successfully');\n        } else {\n          this.$message.error('Failed to assign user');\n        }\n      }).catch(error => {\n        console.error('Error assigning user:', error);\n        this.$message.error('Failed to assign user');\n      });\n    },\n    markAsCompleted(chore) {\n      axios.put(`http://localhost:8080/chores/${chore.id}/complete`).then(response => {\n        if (response.data.status === 'success') {\n          const updatedChore = this.tableData.find(c => c.id === chore.id);\n          if (updatedChore) {\n            updatedChore.choreStatus = 'COMPLETED';\n          }\n          this.$message.success('Chore marked as completed');\n        } else {\n          this.$message.error('Failed to complete chore');\n        }\n      }).catch(error => {\n        console.error('Error completing chore:', error);\n        this.$message.error('Failed to complete chore');\n      });\n    }\n  },\n  mounted() {\n    this.fetchChores();\n    this.fetchSpaceUsers();\n  },\n  computed: {\n    assignedUserId: {\n      get() {\n        return this.assignedUser ? this.assignedUser.id : null;\n      },\n      set(value) {\n        this.assignUser(this.id, value);\n      }\n    },\n    sortedTableData() {\n      return [...this.tableData].sort((a, b) => {\n        if (a.choreStatus === 'COMPLETED' && b.choreStatus !== 'COMPLETED') {\n          return 1;\n        }\n        if (a.choreStatus !== 'COMPLETED' && b.choreStatus === 'COMPLETED') {\n          return -1;\n        }\n        return 0;\n      });\n    }\n  }\n};","map":{"version":3,"names":["AppLayout","axios","components","data","tableData","dialogVisible","isEdit","choreForm","id","choreName","points","dueDate","choreStatus","spaceUsers","methods","getStatusType","status","editChore","row","deleteChore","$confirm","confirmButtonText","cancelButtonText","type","then","delete","$message","success","fetchChores","catch","error","console","submitChore","url","method","resetForm","get","response","fetchSpaceUsers","spaceId","localStorage","getItem","users","assignUser","choreId","userId","put","assignedUser","find","user","chore","c","markAsCompleted","updatedChore","mounted","computed","assignedUserId","set","value","sortedTableData","sort","a","b"],"sources":["src/views/homeharmony/ChoreView.vue"],"sourcesContent":["<template>\r\n    <app-layout>\r\n        <div class=\"chore-container\">\r\n            <!-- Create button -->\r\n            <div class=\"header-actions\">\r\n                <el-button type=\"primary\" @click=\"dialogVisible = true\">Create New Chore</el-button>\r\n            </div>\r\n\r\n            <!-- Chores table -->\r\n            <el-table :data=\"sortedTableData\" border>\r\n                <el-table-column prop=\"choreName\" label=\"Chore Name\" width=\"200\"></el-table-column>\r\n                <el-table-column prop=\"points\" label=\"Points\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"dueDate\" label=\"Due Date\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"choreStatus\" label=\"Status\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-tag :type=\"getStatusType(scope.row.choreStatus)\">\r\n                            {{ scope.row.choreStatus }}\r\n                        </el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Assigned To\" width=\"180\">\r\n                    <template #default=\"scope\">\r\n                        <div v-if=\"scope.row.assignedUser\">\r\n                            {{ scope.row.assignedUser.username }}\r\n                            <el-button type=\"text\" size=\"mini\" @click=\"scope.row.showSelect = true\" v-if=\"!scope.row.showSelect\">\r\n                                Change\r\n                            </el-button>\r\n                        </div>\r\n                        <el-select\r\n                            v-if=\"!scope.row.assignedUser || scope.row.showSelect\"\r\n                            v-model=\"scope.row.assignedUserId\"\r\n                            placeholder=\"Assign user\"\r\n                            @change=\"(value) => {\r\n                                assignUser(scope.row.id, value);\r\n                                scope.row.showSelect = false;\r\n                            }\">\r\n                            <el-option\r\n                                v-for=\"user in spaceUsers\"\r\n                                :key=\"user.id\"\r\n                                :label=\"user.username\"\r\n                                :value=\"user.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Complete\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button \r\n                            :type=\"scope.row.choreStatus === 'COMPLETED' ? 'success' : 'primary'\"\r\n                            size=\"mini\"\r\n                            :disabled=\"scope.row.choreStatus === 'COMPLETED'\"\r\n                            @click=\"markAsCompleted(scope.row)\">\r\n                            {{ scope.row.choreStatus === 'COMPLETED' ? 'Completed' : 'Mark Complete' }}\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Options\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"editChore(scope.row)\">Edit</el-button>\r\n                        <el-button type=\"danger\" size=\"mini\" @click=\"deleteChore(scope.row.id)\">Delete</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <!-- Create/Edit Dialog -->\r\n            <el-dialog :title=\"isEdit ? 'Edit Chore' : 'Create New Chore'\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n                <el-form :model=\"choreForm\" label-width=\"120px\">\r\n                    <el-form-item label=\"Chore Name\">\r\n                        <el-input v-model=\"choreForm.choreName\" placeholder=\"Enter chore name\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Points\">\r\n                        <el-input-number v-model=\"choreForm.points\" :min=\"0\"></el-input-number>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"Due Date\">\r\n                        <el-date-picker\r\n                            v-model=\"choreForm.dueDate\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"Select due date\"\r\n                            value-format=\"yyyy-MM-dd HH:mm:ss\">\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n                    <el-button type=\"primary\" @click=\"submitChore\">{{ isEdit ? 'Update' : 'Create' }}</el-button>\r\n                </span>\r\n            </el-dialog>\r\n        </div>\r\n    </app-layout>\r\n</template>\r\n\r\n<script>\r\nimport AppLayout from '@/components/layout/AppLayout.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    components: {\r\n        AppLayout\r\n    },\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            dialogVisible: false,\r\n            isEdit: false,\r\n            choreForm: {\r\n                id: null,\r\n                choreName: '',\r\n                points: 0,\r\n                dueDate: '',\r\n                choreStatus: 'PENDING'\r\n            },\r\n            spaceUsers: [],\r\n        }\r\n    },\r\n    methods: {\r\n        getStatusType(status) {\r\n            switch (status) {\r\n                case 'PENDING': return 'warning'\r\n                case 'IN_PROGRESS': return 'primary'\r\n                case 'COMPLETED': return 'success'\r\n                default: return 'info'\r\n            }\r\n        },\r\n        editChore(row) {\r\n            this.isEdit = true\r\n            this.choreForm = { ...row }\r\n            this.dialogVisible = true\r\n        },\r\n        deleteChore(id) {\r\n            this.$confirm('Are you sure you want to delete this chore?', 'Warning', {\r\n                confirmButtonText: 'Delete',\r\n                cancelButtonText: 'Cancel',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                axios.delete(`http://localhost:8080/chores/${id}`)\r\n                    .then(() => {\r\n                        this.$message.success('Chore deleted successfully')\r\n                        this.fetchChores()\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error deleting chore:', error)\r\n                        this.$message.error('Failed to delete chore')\r\n                    })\r\n            })\r\n        },\r\n        submitChore() {\r\n            const url = this.isEdit \r\n                ? `http://localhost:8080/chores/${this.choreForm.id}`\r\n                : 'http://localhost:8080/chores'\r\n            const method = this.isEdit ? 'put' : 'post'\r\n\r\n            axios[method](url, this.choreForm)\r\n                .then(() => {\r\n                    this.$message.success(this.isEdit ? 'Chore updated successfully' : 'Chore created successfully')\r\n                    this.dialogVisible = false\r\n                    this.resetForm()\r\n                    this.fetchChores()\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error saving chore:', error)\r\n                    this.$message.error('Failed to save chore')\r\n                })\r\n        },\r\n        resetForm() {\r\n            this.isEdit = false\r\n            this.choreForm = {\r\n                id: null,\r\n                choreName: '',\r\n                points: 0,\r\n                dueDate: '',\r\n                choreStatus: 'PENDING'\r\n            }\r\n        },\r\n        fetchChores() {\r\n            axios.get('http://localhost:8080/chores')\r\n                .then(response => {\r\n                    if (response.data && response.data.status === 'success') {\r\n                        this.tableData = response.data.data;\r\n                    } else {\r\n                        this.$message.error('Failed to fetch chores: Invalid response format');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error fetching chores:', error);\r\n                    this.$message.error('Failed to fetch chores');\r\n                });\r\n        },\r\n        fetchSpaceUsers() {\r\n            const spaceId = localStorage.getItem('spaceId');\r\n            if (!spaceId) return;\r\n            \r\n            axios.get(`http://localhost:8080/space/${spaceId}`)\r\n                .then(response => {\r\n                    if (response.data && response.data.users) {\r\n                        this.spaceUsers = response.data.users;\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error fetching space users:', error);\r\n                    this.$message.error('Failed to fetch space users');\r\n                });\r\n        },\r\n        assignUser(choreId, userId) {\r\n            axios.put(`http://localhost:8080/chores/${choreId}/assign/${userId}`)\r\n                .then(response => {\r\n                    if (response.data.status === 'success') {\r\n                        const assignedUser = this.spaceUsers.find(user => user.id === userId);\r\n                        const chore = this.tableData.find(c => c.id === choreId);\r\n                        if (chore) {\r\n                            chore.assignedUser = assignedUser;\r\n                            chore.choreStatus = 'IN_PROGRESS';\r\n                        }\r\n                        this.$message.success('User assigned successfully');\r\n                    } else {\r\n                        this.$message.error('Failed to assign user');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error assigning user:', error);\r\n                    this.$message.error('Failed to assign user');\r\n                });\r\n        },\r\n        markAsCompleted(chore) {\r\n            axios.put(`http://localhost:8080/chores/${chore.id}/complete`)\r\n                .then(response => {\r\n                    if (response.data.status === 'success') {\r\n                        const updatedChore = this.tableData.find(c => c.id === chore.id);\r\n                        if (updatedChore) {\r\n                            updatedChore.choreStatus = 'COMPLETED';\r\n                        }\r\n                        this.$message.success('Chore marked as completed');\r\n                    } else {\r\n                        this.$message.error('Failed to complete chore');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error completing chore:', error);\r\n                    this.$message.error('Failed to complete chore');\r\n                });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchChores()\r\n        this.fetchSpaceUsers()\r\n    },\r\n    computed: {\r\n        assignedUserId: {\r\n            get() {\r\n                return this.assignedUser ? this.assignedUser.id : null;\r\n            },\r\n            set(value) {\r\n                this.assignUser(this.id, value);\r\n            }\r\n        },\r\n        sortedTableData() {\r\n            return [...this.tableData].sort((a, b) => {\r\n                if (a.choreStatus === 'COMPLETED' && b.choreStatus !== 'COMPLETED') {\r\n                    return 1;\r\n                }\r\n                if (a.choreStatus !== 'COMPLETED' && b.choreStatus === 'COMPLETED') {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.chore-container {\r\n    padding: 20px;\r\n}\r\n\r\n.header-actions {\r\n    margin-bottom: 20px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.dialog-footer {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 10px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}